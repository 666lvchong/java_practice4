<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.4//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wechat_business.entity.ActivityInfo">
    <!-- 定义结果集 -->
    <resultMap id="activityInfoMap" type="wechat_business.entity.ActivityInfo">
        <id property="id" column="ID" jdbcType="BIGINT"/>
        <result property="discount" column="DISCOUNT" jdbcType="DOUBLE"/>
        <result property="activityName" column="ACTIVITY_NAME" jdbcType="VARCHAR"/>
        <result property="activityStartTime" column="ACTIVITY_START_TIME" jdbcType="DATETIME"/>
        <result property="activityEndTime" column="ACTIVITY_END_TIME" jdbcType="DATETIME"/>
    </resultMap>
    <!-- 定义查询列 -->
    <sql id="columns">
        ID,DISCOUNT,ACTIVITY_NAME,ACTIVITY_START_TIME,ACTIVITY_END_TIME
    </sql>
    <!-- 根据id删除 -->
    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM ACTIVITY_INFO WHERE ID=#{id}
    </delete>
    <!-- 根据多个id删除 -->
    <delete id="deleteByIds" parameterType="java.util.Arrays">
        DELETE FROM ACTIVITY_INFO WHERE ID IN
        <foreach collection="array" item="ids" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    <!-- 保存 -->
    <insert id="save" parameterType="wechat_business.entity.ActivityInfo">
        INSERT INTO ACTIVITY_INFO(ID,DISCOUNT,ACTIVITY_NAME,ACTIVITY_START_TIME,ACTIVITY_END_TIME) VALUES (#{id},#{discount},#{activityName},#{activityStartTime},#{activityEndTime})
    </insert>
    <!-- 修改 -->
    <update id="update" parameterType="wechat_business.entity.ActivityInfo">
        UPDATE ACTIVITY_INFO SET DISCOUNT=#{discount},ACTIVITY_NAME=#{activityName},ACTIVITY_START_TIME=#{activityStartTime},ACTIVITY_END_TIME=#{activityEndTime} WHERE ID=#{id}
    </update>
    <!-- 根据id查询 -->
    <select id="findById" parameterType="java.lang.Long" resultMap="activityInfoMap">
        SELECT <include refid="columns"/> FROM ACTIVITY_INFO WHERE ID=#{id}
    </select>
    <!-- 根据条件查询 -->
    <select id="findByCondtion" resultMap="activityInfoMap">
        SELECT <include refid="columns"/> FROM ACTIVITY_INFO WHERE 1=1
        <if test="@Ognl@isNotEmpty(ACTIVITY_NAME)">
            AND ACTIVITY_NAME LIKE #{activityName}
        </if>
    </select>
    <!-- 根据条件分页查询 -->
    <select id="findByCondtionForPage" resultMap="activityInfoMap">
        SELECT <include refid="columns"/> FROM ACTIVITY_INFO WHERE 1=1
          <if test="@Ognl@isNotEmpty(ACTIVITY_NAME)">
              AND ACTIVITY_NAME LIKE #{activityName}
          </if>
    </select>
</mapper>